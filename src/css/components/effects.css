/**
 * 视觉效果样式
 * 打字机、鼠标光效、3D卡片、页面过渡、视差
 */

/* ==================== 打字机效果 ==================== */

.typewriter-cursor::after {
    content: attr(data-cursor);
    animation: blink 0.7s infinite;
    color: var(--color-accent-light);
    font-weight: 300;
    margin-left: 2px;
}

body.dark-mode .typewriter-cursor::after {
    color: var(--color-accent-dark);
}

@keyframes blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
}

/* ==================== 鼠标跟随光效 ==================== */

.mouse-glow {
    position: fixed;
    width: 400px;
    height: 400px;
    border-radius: 50%;
    pointer-events: none;
    z-index: 9999;
    transform: translate(-50%, -50%);
    background: radial-gradient(
        circle,
        rgba(90, 125, 154, 0.08) 0%,
        rgba(90, 125, 154, 0.04) 30%,
        transparent 70%
    );
    opacity: 0;
    transition: opacity 0.3s ease;
    mix-blend-mode: screen;
}

.mouse-glow.visible {
    opacity: 1;
}

body.dark-mode .mouse-glow {
    background: radial-gradient(
        circle,
        rgba(146, 193, 222, 0.12) 0%,
        rgba(146, 193, 222, 0.06) 30%,
        transparent 70%
    );
}

/* ==================== 3D 卡片悬浮效果 ==================== */

.article-card {
    transition: transform 0.1s ease-out, box-shadow 0.3s ease;
    transform-style: preserve-3d;
    will-change: transform;
    position: relative;
    overflow: hidden;
}

/* 光泽效果 */
.article-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(
        circle at var(--glare-x, 50%) var(--glare-y, 50%),
        rgba(255, 255, 255, 0.15) 0%,
        transparent 50%
    );
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
    z-index: 1;
}

.article-card:hover::before {
    opacity: 1;
}

.article-card:hover {
    box-shadow: 
        0 20px 40px rgba(0, 0, 0, 0.15),
        0 0 0 1px rgba(255, 255, 255, 0.1);
}

body.dark-mode .article-card:hover {
    box-shadow: 
        0 20px 40px rgba(0, 0, 0, 0.4),
        0 0 0 1px rgba(255, 255, 255, 0.05);
}

body.dark-mode .article-card::before {
    background: radial-gradient(
        circle at var(--glare-x, 50%) var(--glare-y, 50%),
        rgba(255, 255, 255, 0.08) 0%,
        transparent 50%
    );
}

/* ==================== 页面切换动画 ==================== */

/* 淡出 */
.page-exit {
    animation: fadeOut 0.2s ease forwards;
}

.page-exit-fade {
    animation: fadeOut 0.2s ease forwards;
}

/* 向左滑出 */
.page-exit-left {
    animation: slideOutLeft 0.2s ease forwards;
}

/* 向右滑出 */
.page-exit-right {
    animation: slideOutRight 0.2s ease forwards;
}

/* 淡入 */
.page-enter {
    animation: fadeIn 0.3s ease forwards;
}

.page-enter-fade {
    animation: fadeIn 0.3s ease forwards;
}

/* 从右滑入 */
.page-enter-left {
    animation: slideInFromRight 0.3s ease forwards;
}

/* 从左滑入 */
.page-enter-right {
    animation: slideInFromLeft 0.3s ease forwards;
}

@keyframes fadeOut {
    from { opacity: 1; transform: translateY(0); }
    to { opacity: 0; transform: translateY(-10px); }
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes slideOutLeft {
    from { opacity: 1; transform: translateX(0); }
    to { opacity: 0; transform: translateX(-30px); }
}

@keyframes slideOutRight {
    from { opacity: 1; transform: translateX(0); }
    to { opacity: 0; transform: translateX(30px); }
}

@keyframes slideInFromRight {
    from { opacity: 0; transform: translateX(30px); }
    to { opacity: 1; transform: translateX(0); }
}

@keyframes slideInFromLeft {
    from { opacity: 0; transform: translateX(-30px); }
    to { opacity: 1; transform: translateX(0); }
}

/* ==================== 视差滚动 ==================== */

#particles-js {
    will-change: transform;
}

.sidebar {
    will-change: transform;
}

/* ==================== 响应式 ==================== */

@media (max-width: 768px) {
    .mouse-glow {
        display: none;
    }
    
    .article-card:hover {
        transform: none !important;
    }
    
    .article-card::before {
        display: none;
    }
}

/* 减少动画偏好 */
@media (prefers-reduced-motion: reduce) {
    .typewriter-cursor::after {
        animation: none;
    }
    
    .mouse-glow {
        display: none;
    }
    
    .article-card {
        transition: box-shadow 0.3s ease;
    }
    
    .article-card:hover {
        transform: none !important;
    }
    
    .page-exit,
    .page-enter {
        animation: none;
    }
}

